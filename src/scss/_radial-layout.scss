
@use './variables' as *;

/*! 
## Orbit Radial Layout

Orbit radial layout is the core of Orbit framework that offers a flexible, clean and simple way to design radial UI using just CSS and some optional vanilla web components crafted to improve dev UX.

### Overview

`.orbit` and `.orbit-*` have `--o-orbit-number` to individualize their position according to the maximum number of orbits (e.g., `orbit-4` has `--o-orbit-number: 4`). Similarly, other elements such as `satellites`, `spokes`, `sectors`, and others use `--o-orbit-child-number` to be individualized.

`.orbit` and `.orbit-*` hold a unique `--o-angle` value calculated by counting their children. This allows to distribute such elements along an orbit.

### Mechanism

The mechanism is straightforward:

- `--o-orbit-number` gives a radius that informs where each `orbit` is placed, according to `.orbit-zone` length and maximum number of orbits. For example, with an `.orbit-zone` length of 500px and a maximum of 12 orbits, `orbit-4` will have 166.66 pixels of radius.

- `--o-angle` is calculated depending on children number in an orbit (if one orbit has 3 satellites, `--o-angle` is 120deg). Finally, `--o-angle` is multiplied by `--o-orbit-child-numbers`. For example, satellite one will have 120deg, satellite two 240deg, and satellite three 360deg, and each satellite will be placed along its orbit at 166.66px.

### Modifiers

There are some modifiers to adjust orbit child distribution:

- `--o-range`: This variable allows the user to set an arbitrary arc length. Values can range from 0 to 360deg. For convenience, there are utility classes `range-*` (.range-0 to .range-360).

- `--o-from`: This variable allows the user to set an arbitrary starting point. Values can range from 0 to 360deg. For convenience, there are utility classes `from-*` (.from-0 to .from-360).

- ccw

- fit-range

### Usage and Examples

```html
<!-- Example usage of Orbit Radial Layout -->
<div class="orbit-zone">
    <div class="orbit-3"></div>
    <div class="orbit-4">
        <div class="satellite"></div>
        <div class="satellite"></div>
        <div class="satellite"></div>
    </div>
</div>
```

```html
<!-- Example usage of Orbit Radial Layout with custom range -->
<div class="orbit range-270">
  <o-sector>
  <o-sector>
  <o-sector>
</div>
```

```html
<!-- Example usage of Orbit Radial Layout with custom starting point -->
<div class="orbit-3 from-90">
  <div class="spoke"></div>
  <div class="spoke"></div>
  <div class="spoke"></div>
  <div class="spoke"></div>
  <div class="spoke"></div>
</div>
```

#### To-do

- Improve this doc section to be more clear
- Add angle modifier

*/

/* Orbits layout */
.orbit-0 {
  --o-orbit-number: 0.01;
}
@for $i from 1 through $max-orbits {
    :nth-child(#{$i} of .orbit), .orbit-#{$i} {
    --o-orbit-number: #{$i};
    }
}

/* Satellites, sectors, label, segment, and spokes layout */
@for $i from 1 through $max-orbiters {
 :nth-child(#{$i} of .segment){
    --o-orbit-child-number: #{$i - 2}; // Uses - 1 to start from 0 deg.
    }
}

@for $i from 1 through $max-orbiters {
  :nth-child(#{$i} of .satellite),:nth-child(#{$i} of o-sector), :nth-child(#{$i} of .spoke) ,:nth-child(#{$i} of o-label) {
    --o-orbit-child-number: #{$i - 1}; // Uses - 1 to start from 0 deg.
    }
}

@for $i from 1 through $max-orbiters {
    .orbit:has(> :nth-child(#{$i} of .satellite), > :nth-child(#{$i} of o-sector), > :nth-child(#{$i} of .spoke), > :nth-child(#{$i} of .segment), > :nth-child(#{$i} of o-label)), 
    [class*='orbit-']:not(.orbit-zone):has(> :nth-child(#{$i} of .satellite), > :nth-child(#{$i} of o-sector), > :nth-child(#{$i} of .spoke), > :nth-child(#{$i} of .segment), > :nth-child(#{$i} of o-label)) {
    --o-angle: calc(var(--o-range) / (#{$i} - var(--o-fit-range, 0)));
    }
}

@for $i from 1 through $max-orbiters {
  .orbit:has(> :nth-child(#{$i} of .segment)), 
  [class*='orbit-']:not(.orbit-zone):has(> :nth-child(#{$i} of .segment)) {
  --o-angle: calc(var(--o-range) / #{$i });
  }
}

