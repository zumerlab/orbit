
@use './variables' as *;

/*! 
## Orbit Radial Layout

Orbit radial layout is the core of Orbit library, offering a flexible, clean and simple way to design radial apps using just CSS.

### Overview

`.orbit` and `.orbit-*` have `--o-orbit-number` to individualize their position according to the maximum number of orbits (e.g., `orbit-4` has `--o-orbit-number: 4`). Similarly, other elements such as `satellites`, `vectors`, and `sectors` use `--o-orbit-child-number` to be individualized.

`.orbit` and `.orbit-*` hold a unique `--o-angle` calculated by counting their children. This allows for some calculations to distribute such elements along an orbit.

### Mechanism

The mechanism is straightforward:

- `--o-orbit-number` gives a radius that informs where each `orbit` is placed, according to both the `.orbital-zone` length and the maximum number of orbits. For example, with an `.orbital-zone` length of 500px and a maximum of 12 orbits, `orbit-4` will have 166.66 pixels of radius.

- According to child number in an orbit, `--o-angle` is calculated (if one orbit has 3 satellites, `--o-angle` is 120deg). Finally, `--o-angle` is multiplied by `--o-orbit-child-numbers`. For example, satellite one will have 120deg, satellite two 240deg, and satellite three 360deg, and each satellite will be placed along its orbit at 166.66px.

### Modifiers

There are some modifiers to adjust orbit child distribution:

- `--o-range`: This variable allows the user to set an arbitrary arc length. Values can range from 0 to 360deg. For convenience, there are utility classes `range-*` (.range-0 to .range-360).

- `--o-from`: This variable allows the user to set an arbitrary starting point. Values can range from 0 to 360deg. For convenience, there are utility classes `begin-at-*` (.from-0 to .from-360).

### Usage and Examples

```html
<!-- Example usage of Orbit Radial Layout -->
<div class="orbital-zone">
    <div class="orbit-3"></div>
    <div class="orbit-4">
        <div class="satellite"></div>
        <div class="satellite"></div>
        <div class="satellite"></div>
    </div>
</div>
```

```html
<!-- Example usage of Orbit Radial Layout with custom range -->
<div class="orbit range-270">
  <o-sector>
  <o-sector>
  <o-sector>
</div>
```

```html
<!-- Example usage of Orbit Radial Layout with custom starting point -->
<div class="orbit-3 begin-at-90">
  <div class="vector"></div>
  <div class="vector"></div>
  <div class="vector"></div>
  <div class="vector"></div>
  <div class="vector"></div>
</div>
```

#### To-do

- Check `--o-orbit-number` and `--o-orbit-child-number`
- Check behaviour when nested mix elements inside an orbit ALMOST DONE
- Add @container check OK
- ADD VECTOR POLYGON OK
- SYNC VECTOR AND SATELLITES BY DEFAULT
- pensar el tema de si reducir o no las zone orbits anidadas.. me da que se complica
*/

/* Orbits layout */
.orbit-0 {
  --o-orbit-number: 0.01;
}
@for $i from 1 through $max-orbits {
    :nth-child(#{$i} of .orbit), .orbit-#{$i} {
    --o-orbit-number: #{$i};
    }
}

/* Satellites, sectors, label, segment, and spokes layout */
@for $i from 1 through $max-orbiters {
 :nth-child(#{$i} of .segment){
    --o-orbit-child-number: #{$i - 2}; // Uses - 1 to start from 0 deg.
    }
}

@for $i from 1 through $max-orbiters {
  :nth-child(#{$i} of .satellite),:nth-child(#{$i} of o-sector), :nth-child(#{$i} of .spoke) ,:nth-child(#{$i} of o-label) {
    --o-orbit-child-number: #{$i - 1}; // Uses - 1 to start from 0 deg.
    }
}

@for $i from 1 through $max-orbiters {
    .orbit:has(> :nth-child(#{$i} of .satellite), > :nth-child(#{$i} of o-sector), > :nth-child(#{$i} of .spoke)),
    [class*='orbit-']:has(> :nth-child(#{$i} of .satellite), > :nth-child(#{$i} of o-sector), > :nth-child(#{$i} of .segment), 
    > :nth-child(#{$i} of o-label)) {
    --o-angle: calc(var(--o-range) / #{$i});
    }
}
